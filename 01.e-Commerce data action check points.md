# Data Action

## 1. Concept

[Learn more about Data Actions](https://learn.microsoft.com/en-us/dynamics365/commerce/e-commerce-extensibility/data-actions)

Data actions are JavaScript functions used in the Dynamics 365 Commerce architecture to help fetch and map data required by modules across applications. Data actions offer improved performance through the following features:

- **Integrated application-level and request-level caches** enable state-sharing scenarios.
- **Built-in utilities** support batching to minimize the number of external requests required by your application.
- **Automatic deduplication** ensures that multiple data action calls are not duplicated.

The Dynamics 365 Commerce platform includes a set of core data actions that can be called from modules to perform typical data retrieval, such as returning product details. Additionally, you can create custom data actions to fetch and process data required by modules.

## 2. Key Parts of a Data Action

- **Action function** – The main function that contains the logic executed when the action is called. This function may involve making API calls, reading cookies, or transforming data that was passed in.
- **Action input class** – The class used to pass data into the action function. The `cacheObjectType` and `cacheKey` values indicate where in the cache the class should store the action result.
- **createInput method** – An optional method used to build an instance of an action input class for loading data when a page is first populated.

## 3. Create a new custom data action
```
c:\repos\Msdyn365.Commerce.Online>yarn msdyn365 add-data-action get-product-reviews
```
## 4. Supported cache types
The following cache types are supported and can be set on the dataCacheType property:

- **request**: Action input caches the entity for the life cycle of the request. All of the subsequent data action inputs with the same cachekey (within the same request) will be served from the request cache.

- **application**: Action input caches the entity for the life cycle of the application (subject to time to refresh (TTR) and time to live (TTL) values as defined in cache settings. All of the subsequent data action inputs with the same cachekey will be served from the application cache.

- **instance**: Instance is a special cache type setting primarily used for aggregator data actions that do not make a request and extract information from other data actions, for example a categories hierarchy. Such data actions are run on server and client independently. If the instance is not specified, then such aggregator data actions would contain duplicate data.

- **instance**: Used to skip or bypass the request cache. An action with cache type "none" skips the caching layer completely.

## 5. Test data actions with mocks
- **demo**

## 6. Page load data actions
- **demo**
